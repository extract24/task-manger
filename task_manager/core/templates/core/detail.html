{% extends 'core/base.html' %}

{% block title %} {{task.name}} {% endblock %}

{% block content %}

    <div class="max-w-2xl flex flex-col items-center mx-auto p-4 bg-gray-300">
        <h1 class="text-2xl font-bold mb-4">{{task.name}}</h1>
        <p class="mb-4">{{task.description}}</p>
        {% if task.assign_user %}
            <div class="mb-4">
                <p class="text-gray-600"> Task is created by {{task.created_by}} on {{task.created_at}} assign to {{task.assign_user}} and due on {{task.due_date}}. {% if task.completed_date %} Completed on {{task.completed_date}} {% endif %}</p>
            </div>

        {% else %}
            <div class="mb-4">
                <p class="text-gray-600"> Task is created by {{task.created_by}} on {{task.created_at}} and due on {{task.due_date}}</p>
            </div>

        {% endif %}
        
        {% if task.created_by == request.user or task.assign_user == request.user %}
            <div class="bg-gray-800 rounded-lg p-4">
                <h3 class="font-medium text-lg mb-4">This is your task</h3>

                <div class="flex items-center justify-between">
                    {% if not task.assign_user %}
                        <a href="{% url 'core:assign_user' task.id %}" class="inline-block px-4 py-2 rounded-lg text-white bg-blue-500 hover:bg-blue-600 focus:bg-blue-600">Assign User</a>
                    {% else %}
                        <P class="text-yellow-300 mx-2">The Task is assign to {{task.assign_user}}</P>
                        <a href="{% url 'conversation:task_messages' task.id %}" class="inline-block px-4 py-2 rounded-lg text-white bg-blue-500 hover:bg-blue-600 focus:bg-blue-600">Contact User</a>
                    {% endif %}

                    {% if  task.task_status == 'CO' %}
                        <p class="text-green-500 font-medium">This task has been completed</p>
                    {% else %}
                        {% if task.assign_user == request.user %}
                            <a href="{% url 'core:completed_status' task.id %}" class="inline-block px-4 py-2 rounded-lg text-white bg-green-500 hover:bg-green-600 focus:bg-green-600">Task Completed</a>
                        {% endif %}
                    {% endif %}

                    {% if task.created_by == request.user %}
                        <a href="{% url 'core:edit_task' task.id %}" class="inline-block px-4 py-2 rounded-lg text-white bg-yellow-500 hover:bg-yellow-600 focus:bg-yellow-600">Edit</a>
                        <a href="{% url 'core:delete_task' task.id %}" class="inline-block px-4 py-2 rounded-lg text-white bg-red-500 hover:bg-red-600 focus:bg-red-600">Delete</a>
                    {% endif %}

                </div>
            </div>
        {% endif %}
 
    </div>


{% endblock %}
